<!DOCTYPE html>
<html>
  <head>
    <title>Chat App</title>
  </head>
  <link rel="stylesheet" href="style.css" />n
  <body>
    <div id="chat"></div>
    <input type="text" id="messageInput" placeholder="이곳에 메세지를 입력하세요" />
    <button onclick="sendMessage()">Send</button>

    <script>
      const ws = new WebSocket('ws://192.168.207.238:8080');
      const chat = document.getElementById('chat');
      const messageInput = document.getElementById('messageInput');

      ws.onmessage = function (event) {
        // event.data가 Blob 인스턴스일 경우 FileReader를 사용해서 읽어오기
        if (event.data instanceof Blob) {
          const reader = new FileReader();
          reader.onload = function () {
            const message = document.createElement('p');
            message.textContent = reader.result;
            chat.appendChild(message);
          };
          reader.readAsText(event.data);
        } else {
          // 메시지가 문자열인 경우, 직접 표시
          const message = document.createElement('p');
          message.textContent = event.data;
          chat.appendChild(message);
        }
      };
      
      // 메시지 전송 함수
        function sendMessage() {
        const message = messageInput.value.trim(); // 입력된 메시지에서 앞뒤 공백을 제거하여 가져옵니다.
        
        // 메시지가 비어있지 않은 경우에만 전송
        if (message !== '') {
          ws.send(message); // WebSocket을 통해 메시지 전송
          messageInput.value = ''; // 입력란 초기화
        } else {
          // 메시지가 공백 문자열인 경우 아무 작업도 수행하지 않음
          console.log('공백 메시지는 전송할 수 없습니다.');
        }
      }

    </script>
  </body>
</html>
